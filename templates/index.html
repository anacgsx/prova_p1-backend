{% extends "base.html" %}
{% block title %}Lista de Categorias{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="h5">Categorias</h2>
  <a href="/add" class="btn btn-outline-light">+ Nova</a>
</div>
<table class="table table-dark table-striped align-middle">
  <thead>
    <tr><th>Nome</th><th>Descrição</th><th>Status</th><th>Ações</th></tr>
  </thead>
  <tbody>
    {% for cat in categories %}
    <tr>
      <td><a href="/category/{{ cat.id }}" class="link-light">{{ cat.name }}</a></td>
      <td>{{ cat.description }}</td>
      <td>
        {% if cat.is_active %}<span class="badge bg-success">Ativa</span>{% else %}<span class="badge bg-secondary">Inativa</span>{% endif %}
      </td>
     <td>
  <a href="/category/{{ cat.id }}/edit" class="btn btn-sm btn-warning">Editar</a>

  <form method="post" action="/category/{{ cat.id }}/toggle" style="display:inline;">
    <button class="btn btn-sm btn-info" type="submit">
      {% if cat.is_active %}Desativar{% else %}Ativar{% endif %}
    </button>
  </form>

  <form method="post" action="/category/{{ cat.id }}/delete" style="display:inline;"
        onsubmit="return confirm('Tem certeza que deseja excluir {{ cat.name }}?');">
    <button class="btn btn-sm btn-danger" type="submit">Excluir</button>
  </form>
</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
